<!DOCTYPE html>
<html lang="en-gb">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.75.1 with theme Tranquilpeak 0.4.8-BETA">
<meta name="author" content="Emma Vestesson">
<meta name="keywords" content="">
<meta name="description" content="Gender pay gap hackathon (part 2) This is part 2 of my blog about the gender pay gap hack that I went to. You can read part 1 here.
 Reflections It has taken me a long time to write the second part of my experience of the hackathon. I think this is partly because I was unsure how/whether to show the dashboard. This was my first attempt at a shiny dashboard and I did not focus on picking the best metrics for the graphs so I don’t feel like I am showing anything useful and I don’t like the thought of sharing graphs that I am not sure are displaying the data in an appropriate way.">


<meta property="og:description" content="Gender pay gap hackathon (part 2) This is part 2 of my blog about the gender pay gap hack that I went to. You can read part 1 here.
 Reflections It has taken me a long time to write the second part of my experience of the hackathon. I think this is partly because I was unsure how/whether to show the dashboard. This was my first attempt at a shiny dashboard and I did not focus on picking the best metrics for the graphs so I don’t feel like I am showing anything useful and I don’t like the thought of sharing graphs that I am not sure are displaying the data in an appropriate way.">
<meta property="og:type" content="article">
<meta property="og:title" content="My first hackathon (part 2)">
<meta name="twitter:title" content="My first hackathon (part 2)">
<meta property="og:url" content="/2018/07/my-first-hackathon-part-2/">
<meta property="twitter:url" content="/2018/07/my-first-hackathon-part-2/">
<meta property="og:site_name" content="Playing with data">
<meta property="og:description" content="Gender pay gap hackathon (part 2) This is part 2 of my blog about the gender pay gap hack that I went to. You can read part 1 here.
 Reflections It has taken me a long time to write the second part of my experience of the hackathon. I think this is partly because I was unsure how/whether to show the dashboard. This was my first attempt at a shiny dashboard and I did not focus on picking the best metrics for the graphs so I don’t feel like I am showing anything useful and I don’t like the thought of sharing graphs that I am not sure are displaying the data in an appropriate way.">
<meta name="twitter:description" content="Gender pay gap hackathon (part 2) This is part 2 of my blog about the gender pay gap hack that I went to. You can read part 1 here.
 Reflections It has taken me a long time to write the second part of my experience of the hackathon. I think this is partly because I was unsure how/whether to show the dashboard. This was my first attempt at a shiny dashboard and I did not focus on picking the best metrics for the graphs so I don’t feel like I am showing anything useful and I don’t like the thought of sharing graphs that I am not sure are displaying the data in an appropriate way.">
<meta property="og:locale" content="en-gb">

  
    <meta property="article:published_time" content="2018-07-05T00:00:00">
  
  
    <meta property="article:modified_time" content="2018-07-05T00:00:00">
  
  
  
    
      <meta property="article:section" content="R">
    
  
  
    
      <meta property="article:tag" content="leaflet">
    
      <meta property="article:tag" content="shiny">
    
      <meta property="article:tag" content="shinydashbard">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@gummifot">


  <meta name="twitter:creator" content="@gummifot">











    <title>My first hackathon (part 2)</title>

    <link rel="icon" href="/favicon.png">
    

    

    <link rel="canonical" href="/2018/07/my-first-hackathon-part-2/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-112742782-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">Playing with data</a>
  </div>
  
    
      <a class="header-right-picture "
         href="/#about">
    
    
    
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/emmavestesson">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/emmavestesson/">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">LinkedIn</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      My first hackathon (part 2)
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2018-07-05T00:00:00Z">
        
  
  
  
  
    5  2018
  

      </time>
    
    
  
  
    <span></span>
    
      <a class="category-link" href="/categories/r">R</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              


<div id="gender-pay-gap-hackathon-part-2" class="section level2">
<h2>Gender pay gap hackathon (part 2)</h2>
<p>This is part 2 of my blog about the gender pay gap hack that I went to. You can read part 1 <a href="https://emmavestesson.netlify.com/2018/06/my-first-hackathon/">here</a>.</p>
</div>
<div id="reflections" class="section level2">
<h2>Reflections</h2>
<p>It has taken me a long time to write the second part of my experience of the hackathon. I think this is partly because I was unsure how/whether to show the dashboard. This was my first attempt at a shiny dashboard and I did not focus on picking the best metrics for the graphs so I don’t feel like I am showing anything useful and I don’t like the thought of sharing graphs that I am not sure are displaying the data in an appropriate way. I have decided to share the code but not actually the dashboard. Maybe I will change my mind and add it later but for now this feel right. I hope that the code can still be useful. The good news is that I have developed my shiny skills substantially since the hackathons so hopefully I can write a post about that soon.</p>
</div>
<div id="shiny-dashboard" class="section level2">
<h2>Shiny dashboard</h2>
<p>Much like a shiny app, a shiny dashboard has a server and a user interface function. My dashboard is based on a basic example I found online (I think that I got it from <a href="https://rstudio.github.io/shinydashboard/examples.html">Rstudio</a> but I am not sure) and I was more focused on getting the dashboard to work than to make cool graphs.</p>
<div id="the-server-function" class="section level3">
<h3>The server function</h3>
<p>This is the server function. This is where I put all the code that actually generates an output for example a graph or a map. I start by loading the data I created in my previous post and I create smaller data sets. I created two graphs in addition to the map that I created in my previous post. One is a bar chart showing the proportion of companies where mean are paid more and one is a scatter plot showing the relationship between the percentage of the workforce that is female and the mean percentage difference in hourly pay. Both have different filters which was the biggest challenge but once I figured out how to do it I have started using it a lot. The graphs are included using <code>renderPlot</code> and the map using <code>renderLeaflet</code>. Anything that you want to actually show needs to be named in the server so that you can refer to in in the UI function. The output name should be <code>output$XXXXXX</code> and be right before the render function (the render function you use will depend on the output type).</p>
<pre class="r"><code>library(shinydashboard)
library(shiny)
library(tidyverse)
library(ggplot2)
library(leaflet)
library(here)

# Define server logic required to draw a histogram
server &lt;- function(input, output) {
# load data and create smaller data sets
  gpg_charity &lt;- readRDS( here(&quot;dashboard&quot;,&quot;data&quot;, &quot;gpg_charity.RDS&quot;)) 
  charity &lt;- gpg_charity %&gt;% 
    filter(OrgType==&quot;Charity&quot;)
  pub_sec &lt;- gpg_charity %&gt;% 
    filter(OrgType==&quot;Public Sector&quot;)
  company &lt;- gpg_charity %&gt;% 
    filter(OrgType==&quot;Company&quot;)
# Create map  
  output$my_map &lt;-renderLeaflet({leaflet(gpg_charity, options= leafletOptions( minZoom=6, maxZoom=12) ) %&gt;% 
    addTiles(group = ) %&gt;%
    addProviderTiles(providers$Stamen.Toner, group = &quot;Toner&quot;) %&gt;%
    addProviderTiles(providers$Stamen.TonerLite, group = &quot;Toner Lite&quot;) %&gt;% 
    addCircles(~longitude, ~latitude, group = &quot;charity&quot;, data=charity,
               radius = 100, weight = 0.50, stroke = TRUE, opacity = 100,
               fill = TRUE, color = charity$colour,  popup =charity$label_map ) %&gt;% 
    addCircles(~longitude, ~latitude,  group = &quot;pub_sector&quot;, 
               radius = 100, weight = 0.50, stroke = TRUE, color = pub_sec$colour, 
               popup =charity$label_map ,opacity = 75,data=pub_sec) %&gt;% 
      addCircles(~longitude, ~latitude,  group = &quot;company&quot;, 
                 radius = 100, weight = 0.50, stroke = TRUE, color = company$colour, 
                 popup =charity$label_map ,opacity = 75,data=company) %&gt;% 
    addLayersControl(
      baseGroups = c(&quot;Toner Lite&quot;,&quot;OSM (default)&quot;, &quot;Toner&quot;),
      overlayGroups = c(&quot;charity&quot;, &quot;pub_sector&quot;, &quot;company&quot;),
      options = layersControlOptions(collapsed = FALSE)
    )
  })
  
# Create  bar chart
  output$pie &lt;- renderPlot({
  mytable &lt;- gpg_charity %&gt;%
    filter(EmployerSize == input$EmployerSize) %&gt;% # EmplyerSize is the inputId specified in the server function
    group_by(PaidMore,OrgType) %&gt;%
    count()

  return( ggplot(mytable, aes(y=n,x=OrgType, fill=PaidMore))+
            geom_col(width = 1, position = &quot;fill&quot;)  +
            theme_minimal() )

  })  
  
# Create  scatter plot
  output$DiffMeanHourlyPercent &lt;- renderPlot({
    data1 &lt;- filter(gpg_charity, OrgType == input$org_type) 

    return(ggplot(data1, aes(x=FemaleWorkforce, y=DiffMeanHourlyPercent)) + geom_point() + 
             theme_minimal() +ggtitle(&quot;Relationship between % of female workforce and pay gap&quot;))
  })
  

 
}</code></pre>
</div>
<div id="the-user-interface-function" class="section level3">
<h3>The user interface function</h3>
<p>This is the user interface. This is where I specified the inputs for the different filters using the <code>selectInput</code> function. You need to give each the filter a name <code>inputId</code> that you can refer to in the server function.</p>
<pre class="r"><code>library(shinydashboard)
library(shiny)
library(leaflet)
# Define UI for application that draws a histogram
ui &lt;- dashboardPage(
  dashboardHeader(title = &quot;Gender pay gap&quot;),
  dashboardSidebar(),
  dashboardBody(
# Create selection box for bar chart
    fluidRow(
      box(selectInput(inputId = &quot;org_type&quot;, label = &quot;Choose organisation type&quot;,
                           choices = list(&quot;Charity&quot;, &quot;Company&quot;, &quot;Public Sector&quot;))
      ),
# Create selection box for scatter plot
      box(plotOutput(&quot;DiffMeanHourlyPercent&quot;)),
      box(selectInput(inputId = &quot;EmployerSize&quot;, label = &quot;Choose organisation size&quot;,
                           choices = list(&quot;Less than 250&quot;, &quot;250 to 499&quot;, &quot;500 to 999&quot;, &quot;1000 to 4999&quot;, &quot;20,000 or more&quot;, &quot;Not Provided&quot;))
          ),
      box(plotOutput(&quot;pie&quot;)),
      box(leafletOutput(&quot;my_map&quot;))
    )
  )
)</code></pre>
</div>
</div>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small"></span><br/>
                    
  <a class="tag tag--primary tag--small" href="/tags/leaflet/">leaflet</a>

  <a class="tag tag--primary tag--small" href="/tags/shiny/">shiny</a>

  <a class="tag tag--primary tag--small" href="/tags/shinydashbard/">shinydashbard</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2018/09/settlers-of-catan-the-random-generator/" data-tooltip="Settlers of Catan - the random generator">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml"></span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2018/06/my-first-hackathon/" data-tooltip="My first hackathon (part 1)">
              
                  <span class="hide-xs hide-sm text-small icon-mr"></span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2018/07/my-first-hackathon-part-2/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2018/07/my-first-hackathon-part-2/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2018/07/my-first-hackathon-part-2/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Emma Vestesson. 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2018/09/settlers-of-catan-the-random-generator/" data-tooltip="Settlers of Catan - the random generator">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml"></span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2018/06/my-first-hackathon/" data-tooltip="My first hackathon (part 1)">
              
                  <span class="hide-xs hide-sm text-small icon-mr"></span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2018/07/my-first-hackathon-part-2/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2018/07/my-first-hackathon-part-2/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2018/07/my-first-hackathon-part-2/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2F2018%2F07%2Fmy-first-hackathon-part-2%2F">
          <i class="fa fa-facebook-official"></i><span>%!(EXTRA string=Facebook)</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=%2F2018%2F07%2Fmy-first-hackathon-part-2%2F">
          <i class="fa fa-twitter"></i><span>%!(EXTRA string=Twitter)</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%2F2018%2F07%2Fmy-first-hackathon-part-2%2F">
          <i class="fa fa-google-plus"></i><span>%!(EXTRA string=Google&#43;)</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
    <h4 id="about-card-name">Emma Vestesson</h4>
    
      <div id="about-card-bio">I love all things R and data. I&rsquo;m a senior data analyst at the Health Foundation and a part-time PhD at UCL Great Ormond Street Institute of Child Health. I am also an RStudio Certified Instructor in the tidyverse. This is where I share some of my coding projects - some more useful than others!</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data analyst
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        London
      </div>
    
  </div>
</div>

    

    
  
    
      
      <div id="cover" style="background-image:url('/images/IMG_9347.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  




    
  </body>
</html>

