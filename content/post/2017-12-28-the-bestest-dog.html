---
title: The bestest dog
author: ~
date: '2017-12-28'
slug: the-bestest-dog
draft: true
categories: ["R"]
tags: ["dogs"]
---



<div id="who-is-the-bestest-dog" class="section level2">
<h2>Who is the bestest dog?</h2>
<p>After calling my parents’ dog the bestest dog of all I wanted to find out who the internet thought was the bestest dog. “We rate dogs” on twitter was the obvious choice as the almighty judge of all dogs.</p>
<p>I started by pulling all tweets by <span class="citation">@rate_dogs</span> using the twitteR and ROAuth packages. I decide to not include retweets or replies as I only cared about the official opinion of <span class="citation">@rate_dogs</span>.</p>
<pre class="r"><code>rate_dogs_list &lt;- userTimeline(&quot;dog_rates&quot;,n=3200,includeRts = FALSE, excludeReplies=TRUE)
rate_dogs_df1 &lt;- twListToDF(rate_dogs_list) 
id_vars &lt;- rate_dogs_df1  %&gt;% 
  mutate(id=as.numeric(id)) %&gt;% 
  transmute(min_id= min(id), max_id= max(id)) %&gt;% 
  distinct()
rate_dogs_list2 &lt;- userTimeline(&quot;dog_rates&quot;,n=3200, maxID= id_vars$min, includeRts = FALSE, excludeReplies=TRUE)
rate_dogs_df2 &lt;- twListToDF(rate_dogs_list2)

id_vars &lt;- rate_dogs_df2  %&gt;% 
  mutate(id=as.numeric(id)) %&gt;% 
  transmute(min_id= min(id), max_id= max(id)) %&gt;% 
  distinct()

rate_dogs_list3 &lt;- userTimeline(&quot;dog_rates&quot;,n=3200, maxID= id_vars$min, includeRts = FALSE, excludeReplies=TRUE)

rate_dogs_df3 &lt;- twListToDF(rate_dogs_list3)

id_vars &lt;- rate_dogs_df3  %&gt;% 
  mutate(id=as.numeric(id)) %&gt;% 
  transmute(min_id= min(id), max_id= max(id)) %&gt;% 
  distinct()
rate_dogs_list4 &lt;- userTimeline(&quot;dog_rates&quot;,n=3200, maxID= id_vars$min, includeRts = FALSE, excludeReplies=TRUE)

rate_dogs_df4 &lt;- twListToDF(rate_dogs_list4)

id_vars &lt;- rate_dogs_df4  %&gt;% 
  mutate(id=as.numeric(id)) %&gt;% 
  transmute(min_id= min(id), max_id= max(id)) %&gt;% 
  distinct()
rate_dogs_list5 &lt;- userTimeline(&quot;dog_rates&quot;,n=3200, maxID= id_vars$min, includeRts = FALSE, excludeReplies=TRUE)

rate_dogs_df5 &lt;- twListToDF(rate_dogs_list4)



rate_dogs_df &lt;- bind_rows(rate_dogs_df1, rate_dogs_df2, rate_dogs_df3, rate_dogs_df4, rate_dogs_df5) </code></pre>
<p>Once I had the raw data I needed to extract the scores. I did this using a regular expression that looked for a number followed by “/10”. For some reason I don’t understand the variable I created was added to the data set as a matrix so I had to add a step to make it a vector.</p>
<pre class="r"><code>rate_dogs_scored &lt;- rate_dogs_df %&gt;% 
  mutate(score=str_match(text,pattern=&quot;[0-9]+/10&quot;)) 

rate_dogs_scored$score &lt;- as.vector(rate_dogs_scored$score)

total_rows &lt;- nrow(rate_dogs_scored)
missing&lt;- sum(is.na(rate_dogs_scored$score))
total_rows &lt;- nrow(rate_dogs_scored )

# rate_dogs_scored_untrunc &lt;- rate_dogs_scored %&gt;% 
#   group_by(truncated) %&gt;% 
  

untrunc_rows &lt;-  nrow(rate_dogs_scored %&gt;% 
                        filter(truncated==FALSE))
untrunc_missing&lt;- sum(is.na(rate_dogs_scored %&gt;% 
                        filter(truncated==FALSE) %&gt;% 
                          select(score)))</code></pre>
<p>There are 367 rows in my data frame but only 193 actually have a score. Some tweets will not have a score as they were not rating dogs but unfortunately some tweets are truncated. I am fairly certain that tweets without a score that were not truncuated were tweets that did not score dogs.</p>
<p>After plotting the number of a times a</p>
<pre class="r"><code>ggplot(rate_dogs_scored, aes(x=retweetCount,y=favoriteCount)) + geom_point() +
  theme_bw() + ggtitle(&quot;Distribution of scores&quot;) + ylab(&quot;Favourites&quot;)</code></pre>
<p><img src="/post/2017-12-28-the-bestest-dog_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>ggplot(rate_dogs_scored, aes(x=score,y=favoriteCount)) + geom_point() +
  theme_bw() + ggtitle(&quot;Number of times favourited&quot;) + ylab(&quot;Favourites&quot;)</code></pre>
<p><img src="/post/2017-12-28-the-bestest-dog_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
</div>
